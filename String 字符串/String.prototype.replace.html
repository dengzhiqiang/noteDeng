<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>String.prototype.replace</title>
    <style>
        body {
            background: #000;
            color: deeppink;
            font-size: 18px;
        }

        button {
            font-size: 18px;
            padding-left: 15px;
            padding-right: 15px;
        }
    </style>
</head>
<body>
<button>button</button>

<script>
    //    replace() 方法返回一个由替换值替换一些或所有匹配的模式后的新字符串。模式可以是一个字符串或者一个正则表达式, 替换值可以是一个字符串或者一个每次匹配都要调用的函数。

    //注意：原字符串不会改变。

    //    str.replace(regexp|substr, newSubStr|function)

    //  regexp (pattern)
    //  一个RegExp 对象或者其字面量。该正则所匹配的内容会被第二个参数的返回值替换掉。

    //  substr (pattern)
    //  一个要被 newSubStr 替换的字符串。其被视为一整个字符串，而不是一个正则表达式。仅仅是第一个匹配会被替换。

    //  newSubStr (replacement)
    //  用于替换掉第一个参数在原字符串中的匹配部分的字符串。该字符串中可以内插一些特殊的变量名。参考下面的使用字符串作为参数。

    //  function (replacement)
    //  一个用来创建新子字符串的函数，该函数的返回值将替换掉第一个参数匹配到的结果。参考下面的指定一个函数作为参数。

    //  该方法并不改变调用它的字符串本身，而只是返回一个新的替换后的字符串。
    //  在进行全局的搜索替换时，正则表达式需包含 g 标志。

    //  $$	插入一个 "$"。
    //  $&	插入匹配的子串。
    //  $`	插入当前匹配的子串左边的内容。
    //  $'	插入当前匹配的子串右边的内容。
    //  $n
    //  假如第一个参数是 RegExp对象，并且 n 是个小于100的非负整数，那么插入第 n 个括号匹配的字符串。


</script>
<script>

    //    变量名	代表的值
    //    match	匹配的子串。（对应于上述的$&。）
    //  p1,p2, ...
    //    假如replace()方法的第一个参数是一个RegExp 对象，则代表第n个括号匹配的字符串。（对应于上述的$1，$2等。）
    //
    //  offset
    //    匹配到的子字符串在原字符串中的偏移量。（比如，如果原字符串是“abcd”，匹配到的子字符串是“bc”，那么这个参数将是1）
    //
    //  string	被匹配的原字符串。
    //  (精确的参数个数依赖于replace()的第一个参数是否是一个正则表达式对象， 以及这个正则表达式中指定了多少个括号子串。)
    //
    //    下面的例子将会使 newString 变成'abc - 12345 - #$*%'：
    function replacer(match, p1, p2, p3, offset, string) {
        // p1 is nondigits, p2 digits, and p3 non-alphanumerics
        console.log(match);
        console.log(p1);
        console.log(p2);
        console.log(p3);
        console.log(offset);
        console.log(string);

        // 将匹配的进行如下处理
        return [p1, p2, p3].join(' - ');
    }

    var newString = 'abc12345#$*%'.replace(/([^\d]*)(\d*)([^\w]*)/, replacer);
    console.log(newString);  // abc - 12345 - #$*%
</script>

</body>
</html>